{"version":3,"sources":["../js/file-input.js","../js/diagrams.js","../js/main.js"],"names":["$","change","prev","clone","i","file","files","name","text","handleFileSelect","evt","d3","selectAll","remove","target","reader","FileReader","onload","e","drawChartGeneral","result","drawChartSpecific","readAsDataURL","document","getElementById","style","display","innerHTML","handleFileDestroy","value","addEventListener","margin","top","right","bottom","left","width","height","url","select","append","attr","diagramContainer","svg","x","scaleBand","range","paddingInner","align","y","scaleLinear","csv","error","data","forEach","d","codeOfPatient","Wbc","patients","map","keys","selectButton","enter","appendTo","niceSelect","filteredData","filter","domain","dateOfAnalysis","max","bandwidth","on","tooltip","xPosition","mouse","yPosition","call","axisBottom","axisLeft","transition","delay","duration","window","scrollTo","behavior","updateGeneral","selectedGroup","dataFilter","exit","options","selectedIndex","z","scaleOrdinal","columns","t","length","total","slice","stack","key","_","findKey","v","legend","xOff","yOff","Math","floor","updateSpecific"],"mappings":"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","file":"main.33c51820.js","sourceRoot":"../src/pug","sourcesContent":["$('#file_input').change(function() {\n    var i = $(this).prev('label').clone();\n    var file = $('#file_input')[0].files[0].name;\n    $(this).prev('label').text(file);\n});","function handleFileSelect(evt) {\n    d3.selectAll('svg').remove();\n    var file = evt.target.files[0];\n    var reader = new FileReader();\n    reader.onload = (function(theFile) {\n        return function(e) {\n            drawChartGeneral(e.target.result);\n            drawChartSpecific(e.target.result);\n        };\n    })(file);\n\n    reader.readAsDataURL(file);\n\n    document.getElementById('select_container').style.display = \"block\";\n    document.getElementById('diagrams_select').innerHTML = '';\n}\n\nfunction handleFileDestroy(evt) {\n    document.getElementById('chart_general').remove();\n    document.getElementById('chart_specific').remove();\n    document.getElementById('select_patient').remove();\n    document.getElementById('select_patient-hidden').remove();\n    document.getElementById('diagrams_select').innerHTML = '';\n    document.getElementById('select_container').style.display = \"none\";\n    document.getElementById('file_input').value = '';\n    document.getElementById('file_label').innerHTML = 'choose a .csv file';\n}\n\ndocument.getElementById('file_input').addEventListener('change', handleFileSelect, false);\ndocument.getElementById('file_destroy').addEventListener('click', handleFileDestroy, false);\n\nvar margin = {top: 40, right: 20, bottom: 100, left: 40};\n\nvar width = 1104 - margin.left - margin.right;\nvar height = 600 - margin.top - margin.bottom;\n\nfunction drawChartGeneral(url) {\n    var diagramContainer = d3.select('#diagrams_container').append('div')\n        .attr('id', 'chart_general');\n\n    var svg = d3.select(\"#chart_general\").append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    var x = d3.scaleBand().range([0, width]).paddingInner(0.05).align(0.1);\n    var y = d3.scaleLinear().range([height, 0]);\n\n    d3.csv(url, function (error, data) {\n        if (error) throw error;\n\n        data.forEach(function (d) {\n            d.codeOfPatient = +d.codeOfPatient;\n            d.Wbc = +d.Wbc;\n        });\n\n        var patients = d3.map(data, function(d) { return d.codeOfPatient; }).keys();\n\n        var selectButton = document.getElementById('select_patient-hidden');\n        if (!selectButton) {\n            d3.select('#select_container')\n                .append('select')\n                .attr('id', 'select_patient-hidden')\n                .style(\"display\", \"none\");\n        } else {\n            selectButton.innerHTML = '';\n        }\n\n        d3.select(\"#select_patient-hidden\")\n            .selectAll('myOptions')\n            .data(patients)\n            .enter()\n            .append('option')\n            .text(function (d) { return d; })\n            .attr(\"value\", function (d) { return d; });\n\n        $('#select_patient-hidden')\n            .clone()\n            .attr('id', 'select_patient')\n            .attr('name', 'select_patient')\n            .attr('class', 'wide small')\n            .appendTo($('#diagrams_select'))\n            .niceSelect();\n\n        var filteredData = data.filter(function(d) { return d.codeOfPatient == patients[0]; });\n\n        x.domain(filteredData.map(function (d) {return d.dateOfAnalysis;}));\n        y.domain([0, d3.max(filteredData, function (d) {return d.Wbc;})]);\n\n        svg.append(\"text\")\n            .attr(\"class\", \"graph__subtitle\")\n            .attr(\"x\", (width / 2))\n            .attr(\"y\", -25)\n            .attr(\"text-anchor\", \"middle\")\n            .text(\"Absolute numbers\");\n\n        svg.selectAll(\".graph__bar\")\n            .data(filteredData)\n            .enter().append(\"rect\")\n            .attr(\"class\", \"graph__bar\")\n            .attr(\"x\", function (d) {return x(d.dateOfAnalysis);})\n            .attr(\"y\", function (d) {return y(d.Wbc);})\n            .attr(\"width\", x.bandwidth())\n            .attr(\"height\", 0)\n            .attr(\"fill\", function(d) {\n                if (d.Wbc >= 4.5 && d.Wbc <= 11) {return \"#4CAF50\"}\n                else { return \"#E91E63\" }\n                ;})\n            .on(\"mouseover\", function() { tooltip.style(\"display\", null); })\n            .on(\"mousemove\", function(d) {\n                var xPosition = d3.mouse(this)[0] + 5;\n                var yPosition = d3.mouse(this)[1] - 5;\n                tooltip\n                    .attr(\"transform\", \"translate(\" + xPosition + \",\" + yPosition + \")\")\n                    .style(\"display\", \"inline\")\n                    .select(\"text\").text(`Wbc: ${d.Wbc}`);\n            })\n            .on(\"mouseout\", function() { tooltip.style(\"display\", \"none\"); });\n\n        svg.append(\"g\")\n            .attr(\"class\", \"graph__axis-x\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(d3.axisBottom(x));\n        // .selectAll(\"text\")\n        // .attr(\"transform\", \"rotate(45)\")\n        // .attr(\"text-anchor\", \"start\");\n\n        svg.append(\"g\")\n            .attr(\"class\", \"graph__axis-y\")\n            .call(d3.axisLeft(y));\n\n        var tooltip = svg.append(\"g\")\n            .attr(\"class\", \"graph__tooltip\")\n            .style(\"display\", \"none\");\n\n        tooltip.append(\"rect\")\n            .attr(\"class\", \"graph__tooltip-background\")\n            .attr(\"width\", 100)\n            .attr(\"height\", 25)\n            .attr(\"fill\", \"white\")\n            .style(\"opacity\", 0.7);\n\n        tooltip.append(\"text\")\n            .attr(\"class\", \"graph__tooltip-text\")\n            .attr(\"x\", 50)\n            .attr(\"dy\", \"1.2em\")\n            .style(\"text-anchor\", \"middle\");\n\n        svg.selectAll(\".graph__bar\")\n            .transition()\n            .delay(function(d, i){ return i*50; })\n            .duration(500)\n            .attr(\"height\", function (d) { return height - y(d.Wbc); });\n\n        function updateGeneral(selectedGroup) {\n            var dataFilter = data.filter(function(d) { return d.codeOfPatient == selectedGroup });\n\n            x.domain(dataFilter.map(function (d) {return d.dateOfAnalysis;}));\n            y.domain([0, d3.max(dataFilter, function (d) {return d.Wbc;})]);\n\n            svg.selectAll(\".graph__bar\")\n                .remove()\n                .exit()\n                .data(dataFilter)\n                .enter().append(\"rect\")\n                .attr(\"class\", \"graph__bar\")\n                .attr(\"x\", function (d) {return x(d.dateOfAnalysis);})\n                .attr(\"y\", function (d) {return y(d.Wbc);})\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", 0)\n                .attr(\"fill\", function(d) {\n                    if (d.Wbc >= 4.5 && d.Wbc <= 11) {return \"#4CAF50\"}\n                    else { return \"#E91E63\" }\n                    ;})\n                .on(\"mouseover\", function() { tooltip.style(\"display\", null); })\n                .on(\"mousemove\", function(d) {\n                    var xPosition = d3.mouse(this)[0] + 5;\n                    var yPosition = d3.mouse(this)[1] - 5;\n                    tooltip\n                        .attr(\"transform\", \"translate(\" + xPosition + \",\" + yPosition + \")\")\n                        .style(\"display\", \"inline\")\n                        .select(\"text\").text(`Wbc: ${d.Wbc}`);\n                })\n                .on(\"mouseout\", function() { tooltip.style(\"display\", \"none\"); })\n\n            svg.selectAll(\".graph__axis-x\")\n                .remove()\n                .exit();\n\n            svg.selectAll(\".graph__axis-y\")\n                .remove()\n                .exit();\n\n            svg.append(\"g\")\n                .attr(\"class\", \"graph__axis-x\")\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\n                .call(d3.axisBottom(x));\n\n            svg.append(\"g\")\n                .attr(\"class\", \"graph__axis-y\")\n                .call(d3.axisLeft(y));\n\n            var tooltip = svg.append(\"g\")\n                .attr(\"class\", \"graph__tooltip\")\n                .style(\"display\", \"none\");\n\n            tooltip.append(\"rect\")\n                .attr(\"class\", \"graph__tooltip-background\")\n                .attr(\"width\", 100)\n                .attr(\"height\", 25)\n                .attr(\"fill\", \"white\")\n                .style(\"opacity\", 0.7);\n\n            tooltip.append(\"text\")\n                .attr(\"class\", \"graph__tooltip-text\")\n                .attr(\"x\", 50)\n                .attr(\"dy\", \"1.2em\")\n                .style(\"text-anchor\", \"middle\");\n\n            svg.selectAll(\".graph__bar\")\n                .transition()\n                .delay(function(d, i){ return i*50; })\n                .duration(500)\n                .attr(\"height\", function (d) { return height - y(d.Wbc); });\n        }\n\n        $(\"#select_patient\").on(\"change\", function() {\n            window.scrollTo({\n                top: 0,\n                behavior: 'smooth',\n            });\n            var selectedOption = this.options[this.selectedIndex].text;\n            updateGeneral(selectedOption);\n        });\n    });\n}\n\nfunction drawChartSpecific(url) {\n    var diagramContainer = d3.select('#diagrams_container').append('div')\n        .attr('id', 'chart_specific')\n        .attr('class', 'fadein');\n\n    var svg = d3.select(\"#chart_specific\").append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n            \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    var x = d3.scaleBand()\n        .range([0, width])\n        .paddingInner(0.05)\n        .align(0.1);\n    var y = d3.scaleLinear()\n        .range([height, 0]);\n    var z = d3.scaleOrdinal()\n    // .range([\"#5867dd\", \"#0abb87\", \"#ffb822\", \"#fd397a\", \"#5d78ff\"]);\n        .range([\"#f44336\", \"#E91E63\", \"#9C27B0\", \"#673AB7\",\n            \"#3F51B5\", \"#2196F3\", \"#00BCD4\", \"#4CAF50\",\n            \"#8BC34A\", \"#CDDC39\", \"#FFEB3B\", \"#FFC107\",\n            \"#FF9800\"]);\n\n    d3.csv(url, function(d, i, columns) {\n        for (i = 8, t = 0; i < columns.length; ++i) t += d[columns[i]] = +d[columns[i]];\n        d.total = t;\n        return d;\n    }, function(error, data) {\n        if (error) throw error;\n\n        var patients = d3.map(data, function(d) { return d.codeOfPatient; }).keys();\n\n        var filteredData = data.filter(function(d) { return d.codeOfPatient == patients[0]; });\n\n        var keys = data.columns.slice(8);\n\n        x.domain(filteredData.map(function (d) {return d.dateOfAnalysis;}));\n        y.domain([0, d3.max(data, function (d) {return d.total;})]);\n        z.domain(keys);\n\n        svg.append(\"text\")\n            .attr(\"class\", \"graph__subtitle\")\n            .attr(\"x\", (width / 2))\n            .attr(\"y\", -25)\n            .attr(\"text-anchor\", \"middle\")\n            .text(\"Relative numbers\");\n\n        svg.selectAll(\".graph__bar\")\n            .data(d3.stack().keys(keys)(filteredData))\n            .enter().append(\"g\")\n            .attr(\"class\", \"graph__bar\")\n            .attr(\"fill\", function(d) { return z(d.key); })\n            .selectAll(\"rect\")\n            .data(function(d) { return d; })\n            .enter().append(\"rect\")\n            .attr(\"x\", function(d) { return x(d.data.dateOfAnalysis); })\n            .attr(\"y\", function(d) { return y(d[1]); })\n            .attr(\"height\", function(d) { return y(d[0]) - y(d[1]); })\n            .attr(\"width\", x.bandwidth())\n            .on(\"mouseover\", function() { tooltip.style(\"display\", null); })\n            .on(\"mousemove\", function(d) {\n                var xPosition = d3.mouse(this)[0] + 5;\n                var yPosition = d3.mouse(this)[1] - 5;\n                var key = _.findKey(d.data, function(v) {\n                    return v === d[1]-d[0];\n                });\n                tooltip\n                    .attr(\"transform\", \"translate(\" + xPosition + \",\" + yPosition + \")\")\n                    .style(\"display\", \"block\")\n                    .select(\"text\").text(`${key}: ${d[1]-d[0]}%`);\n            })\n            .on(\"mouseout\", function() { tooltip.style(\"display\", \"none\"); });\n\n        svg.append(\"g\")\n            .attr(\"class\", \"graph__axis-x\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(d3.axisBottom(x));\n\n        svg.append(\"g\")\n            .attr(\"class\", \"graph__axis-y\")\n            .call(d3.axisLeft(y));\n\n        var legend = svg.append(\"g\")\n            .attr(\"class\", \"graph__legend\")\n            .attr(\"transform\", \"translate(0,\" + (height + margin.bottom - 40) + \")\")\n            .selectAll(\"g\")\n            .data(keys.slice())\n            .enter().append(\"g\")\n            .attr( \"transform\", function(d,i) {\n                xOff = (i % 7) * 150;\n                yOff = Math.floor(i  / 7) * 30;\n                return \"translate(\" + xOff + \",\" + yOff + \")\"\n            } );\n\n        legend.append('rect')\n            .attr(\"x\", 0)\n            .attr(\"y\", -15)\n            .attr(\"width\", 20)\n            .attr(\"height\", 20)\n            .style(\"fill\", z);\n\n        legend.append('text')\n            .attr(\"x\", 30)\n            .attr(\"y\", 0)\n            .text(function (d) {return d})\n            .style(\"font-size\", \"0.75rem\");\n\n        var tooltip = svg.append(\"g\")\n            .attr(\"class\", \"graph__tooltip\")\n            .style(\"display\", \"none\");\n\n        tooltip.append(\"rect\")\n            .attr(\"class\", \"graph__tooltip-background\")\n            .attr(\"width\", 160)\n            .attr(\"height\", 25)\n            .attr(\"fill\", \"white\")\n            .style(\"opacity\", 0.7);\n\n        tooltip.append(\"text\")\n            .attr(\"class\", \"graph__tooltip-text\")\n            .attr(\"x\", 80)\n            .attr(\"dy\", \"1.2em\")\n            .style(\"text-anchor\", \"middle\");\n\n        function updateSpecific(selectedGroup) {\n\n            var dataFilter = data.filter(function(d) { return d.codeOfPatient == selectedGroup });\n\n            x.domain(dataFilter.map(function (d) {return d.dateOfAnalysis;}));\n\n            svg.selectAll(\".graph__bar\")\n                .remove()\n                .exit()\n                .data(d3.stack().keys(keys)(dataFilter))\n                .enter().append(\"g\")\n                .attr(\"class\", \"graph__bar\")\n                .attr(\"fill\", function(d) { return z(d.key); })\n                .selectAll(\"rect\")\n                .data(function(d) { return d; })\n                .enter().append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.data.dateOfAnalysis); })\n                .attr(\"y\", function(d) { return y(d[1]); })\n                .attr(\"height\", function(d) { return y(d[0]) - y(d[1]); })\n                .attr(\"width\", x.bandwidth())\n                .on(\"mouseover\", function() { tooltip.style(\"display\", null); })\n                .on(\"mousemove\", function(d) {\n                    var xPosition = d3.mouse(this)[0] + 5;\n                    var yPosition = d3.mouse(this)[1] - 5;\n                    var key = _.findKey(d.data, function(v) {\n                        return v === d[1]-d[0];\n                    });\n                    tooltip\n                        .attr(\"transform\", \"translate(\" + xPosition + \",\" + yPosition + \")\")\n                        .style(\"display\", \"block\")\n                        .select(\"text\").text(`${key}: ${d[1]-d[0]}%`);\n                })\n                .on(\"mouseout\", function() { tooltip.style(\"display\", \"none\"); });\n\n            svg.selectAll(\".graph__axis-x\")\n                .remove()\n                .exit();\n\n            svg.selectAll(\".graph__axis-y\")\n                .remove()\n                .exit();\n\n            svg.append(\"g\")\n                .attr(\"class\", \"graph__axis-x\")\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\n                .call(d3.axisBottom(x));\n\n            svg.append(\"g\")\n                .attr(\"class\", \"graph__axis-y\")\n                .call(d3.axisLeft(y));\n\n            var tooltip = svg.append(\"g\")\n                .attr(\"class\", \"graph__tooltip\")\n                .style(\"display\", \"none\");\n\n            tooltip.append(\"rect\")\n                .attr(\"class\", \"graph__tooltip-background\")\n                .attr(\"width\", 160)\n                .attr(\"height\", 25)\n                .attr(\"fill\", \"white\")\n                .style(\"opacity\", 0.7);\n\n            tooltip.append(\"text\")\n                .attr(\"class\", \"graph__tooltip-text\")\n                .attr(\"x\", 80)\n                .attr(\"dy\", \"1.2em\")\n                .style(\"text-anchor\", \"middle\");\n        }\n\n        $(\"#select_patient\").on(\"change\", function() {\n            window.scrollTo({\n                top: 0,\n                behavior: 'smooth',\n            });\n            var selectedOption = this.options[this.selectedIndex].text;\n            updateSpecific(selectedOption)\n        })\n    });\n}","import './file-input'\nimport './diagrams'"]}