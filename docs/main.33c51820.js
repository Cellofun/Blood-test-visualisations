parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"5Jc1":[function(require,module,exports) {
$("#file_input").change(function(){$(this).prev("label").clone();var e=$("#file_input")[0].files[0].name;$(this).prev("label").text(e)});
},{}],"BU8f":[function(require,module,exports) {
function e(t){d3.selectAll("svg").remove();var e=t.target.files[0],a=new FileReader;a.onload=function(t){l(t.target.result),s(t.target.result)},a.readAsDataURL(e),document.getElementById("select_container").style.display="block",document.getElementById("diagrams_select").innerHTML=""}function a(t){document.getElementById("chart_general").remove(),document.getElementById("chart_specific").remove(),document.getElementById("select_patient").remove(),document.getElementById("select_patient-hidden").remove(),document.getElementById("diagrams_select").innerHTML="",document.getElementById("select_container").style.display="none",document.getElementById("file_input").value="",document.getElementById("file_label").innerHTML="choose a .csv file"}document.getElementById("file_input").addEventListener("change",e,!1),document.getElementById("file_destroy").addEventListener("click",a,!1);var n={top:40,right:20,bottom:100,left:40},r=1104-n.left-n.right,i=600-n.top-n.bottom;function l(t){d3.select("#diagrams_container").append("div").attr("id","chart_general");var e=d3.select("#chart_general").append("svg").attr("width",r+n.left+n.right).attr("height",i+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),a=d3.scaleBand().range([0,r]).paddingInner(.05).align(.1),l=d3.scaleLinear().range([i,0]);d3.csv(t,function(t,n){if(t)throw t;n.forEach(function(t){t.codeOfPatient=+t.codeOfPatient,t.Wbc=+t.Wbc});var s=d3.map(n,function(t){return t.codeOfPatient}).keys(),o=document.getElementById("select_patient-hidden");o?o.innerHTML="":d3.select("#select_container").append("select").attr("id","select_patient-hidden").style("display","none"),d3.select("#select_patient-hidden").selectAll("myOptions").data(s).enter().append("option").text(function(t){return t}).attr("value",function(t){return t}),$("#select_patient-hidden").clone().attr("id","select_patient").attr("name","select_patient").attr("class","wide small").appendTo($("#diagrams_select")).niceSelect();var c=n.filter(function(t){return t.codeOfPatient==s[0]});a.domain(c.map(function(t){return t.dateOfAnalysis})),l.domain([0,d3.max(c,function(t){return t.Wbc})]),e.append("text").attr("class","graph__subtitle").attr("x",r/2).attr("y",-25).attr("text-anchor","middle").text("Absolute numbers"),e.selectAll(".graph__bar").data(c).enter().append("rect").attr("class","graph__bar").attr("x",function(t){return a(t.dateOfAnalysis)}).attr("y",function(t){return l(t.Wbc)}).attr("width",a.bandwidth()).attr("height",0).attr("fill",function(t){return t.Wbc>=4.5&&t.Wbc<=11?"#4CAF50":"#E91E63"}).on("mouseover",function(){d.style("display",null)}).on("mousemove",function(t){var e=d3.mouse(this)[0]+5,a=d3.mouse(this)[1]-5;d.attr("transform","translate("+e+","+a+")").style("display","inline").select("text").text("Wbc: ".concat(t.Wbc))}).on("mouseout",function(){d.style("display","none")}),e.append("g").attr("class","graph__axis-x").attr("transform","translate(0,"+i+")").call(d3.axisBottom(a)),e.append("g").attr("class","graph__axis-y").call(d3.axisLeft(l));var d=e.append("g").attr("class","graph__tooltip").style("display","none");d.append("rect").attr("class","graph__tooltip-background").attr("width",100).attr("height",25).attr("fill","white").style("opacity",.7),d.append("text").attr("class","graph__tooltip-text").attr("x",50).attr("dy","1.2em").style("text-anchor","middle"),e.selectAll(".graph__bar").transition().delay(function(t,e){return 50*e}).duration(500).attr("height",function(t){return i-l(t.Wbc)}),$("#select_patient").on("change",function(){window.scrollTo({top:0,behavior:"smooth"}),function(t){var r=n.filter(function(e){return e.codeOfPatient==t});a.domain(r.map(function(t){return t.dateOfAnalysis})),l.domain([0,d3.max(r,function(t){return t.Wbc})]),e.selectAll(".graph__bar").remove().exit().data(r).enter().append("rect").attr("class","graph__bar").attr("x",function(t){return a(t.dateOfAnalysis)}).attr("y",function(t){return l(t.Wbc)}).attr("width",a.bandwidth()).attr("height",0).attr("fill",function(t){return t.Wbc>=4.5&&t.Wbc<=11?"#4CAF50":"#E91E63"}).on("mouseover",function(){s.style("display",null)}).on("mousemove",function(t){var e=d3.mouse(this)[0]+5,a=d3.mouse(this)[1]-5;s.attr("transform","translate("+e+","+a+")").style("display","inline").select("text").text("Wbc: ".concat(t.Wbc))}).on("mouseout",function(){s.style("display","none")}),e.selectAll(".graph__axis-x").remove().exit(),e.selectAll(".graph__axis-y").remove().exit(),e.append("g").attr("class","graph__axis-x").attr("transform","translate(0,"+i+")").call(d3.axisBottom(a)),e.append("g").attr("class","graph__axis-y").call(d3.axisLeft(l));var s=e.append("g").attr("class","graph__tooltip").style("display","none");s.append("rect").attr("class","graph__tooltip-background").attr("width",100).attr("height",25).attr("fill","white").style("opacity",.7),s.append("text").attr("class","graph__tooltip-text").attr("x",50).attr("dy","1.2em").style("text-anchor","middle"),e.selectAll(".graph__bar").transition().delay(function(t,e){return 50*e}).duration(500).attr("height",function(t){return i-l(t.Wbc)})}(this.options[this.selectedIndex].text)})})}function s(e){d3.select("#diagrams_container").append("div").attr("id","chart_specific").attr("class","fadein");var a=d3.select("#chart_specific").append("svg").attr("width",r+n.left+n.right).attr("height",i+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),l=d3.scaleBand().range([0,r]).paddingInner(.05).align(.1),s=d3.scaleLinear().range([i,0]),o=d3.scaleOrdinal().range(["#f44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#00BCD4","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800"]);d3.csv(e,function(e,a,n){for(a=8,t=0;a<n.length;++a)t+=e[n[a]]=+e[n[a]];return e.total=t,e},function(t,e){if(t)throw t;var c=d3.map(e,function(t){return t.codeOfPatient}).keys(),d=e.filter(function(t){return t.codeOfPatient==c[0]}),p=e.columns.slice(8);l.domain(d.map(function(t){return t.dateOfAnalysis})),s.domain([0,d3.max(e,function(t){return t.total})]),o.domain(p),a.append("text").attr("class","graph__subtitle").attr("x",r/2).attr("y",-25).attr("text-anchor","middle").text("Relative numbers"),a.selectAll(".graph__bar").data(d3.stack().keys(p)(d)).enter().append("g").attr("class","graph__bar").attr("fill",function(t){return o(t.key)}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t){return l(t.data.dateOfAnalysis)}).attr("y",function(t){return s(t[1])}).attr("height",function(t){return s(t[0])-s(t[1])}).attr("width",l.bandwidth()).on("mouseover",function(){f.style("display",null)}).on("mousemove",function(t){var e=d3.mouse(this)[0]+5,a=d3.mouse(this)[1]-5,n=_.findKey(t.data,function(e){return e===t[1]-t[0]});f.attr("transform","translate("+e+","+a+")").style("display","block").select("text").text("".concat(n,": ").concat(t[1]-t[0],"%"))}).on("mouseout",function(){f.style("display","none")}),a.append("g").attr("class","graph__axis-x").attr("transform","translate(0,"+i+")").call(d3.axisBottom(l)),a.append("g").attr("class","graph__axis-y").call(d3.axisLeft(s));var u=a.append("g").attr("class","graph__legend").attr("transform","translate(0,"+(i+n.bottom-40)+")").selectAll("g").data(p.slice()).enter().append("g").attr("transform",function(t,e){return xOff=e%7*150,yOff=30*Math.floor(e/7),"translate("+xOff+","+yOff+")"});u.append("rect").attr("x",0).attr("y",-15).attr("width",20).attr("height",20).style("fill",o),u.append("text").attr("x",30).attr("y",0).text(function(t){return t}).style("font-size","0.75rem");var f=a.append("g").attr("class","graph__tooltip").style("display","none");f.append("rect").attr("class","graph__tooltip-background").attr("width",160).attr("height",25).attr("fill","white").style("opacity",.7),f.append("text").attr("class","graph__tooltip-text").attr("x",80).attr("dy","1.2em").style("text-anchor","middle"),$("#select_patient").on("change",function(){window.scrollTo({top:0,behavior:"smooth"}),function(t){var n=e.filter(function(e){return e.codeOfPatient==t});l.domain(n.map(function(t){return t.dateOfAnalysis})),a.selectAll(".graph__bar").remove().exit().data(d3.stack().keys(p)(n)).enter().append("g").attr("class","graph__bar").attr("fill",function(t){return o(t.key)}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x",function(t){return l(t.data.dateOfAnalysis)}).attr("y",function(t){return s(t[1])}).attr("height",function(t){return s(t[0])-s(t[1])}).attr("width",l.bandwidth()).on("mouseover",function(){r.style("display",null)}).on("mousemove",function(t){var e=d3.mouse(this)[0]+5,a=d3.mouse(this)[1]-5,n=_.findKey(t.data,function(e){return e===t[1]-t[0]});r.attr("transform","translate("+e+","+a+")").style("display","block").select("text").text("".concat(n,": ").concat(t[1]-t[0],"%"))}).on("mouseout",function(){r.style("display","none")}),a.selectAll(".graph__axis-x").remove().exit(),a.selectAll(".graph__axis-y").remove().exit(),a.append("g").attr("class","graph__axis-x").attr("transform","translate(0,"+i+")").call(d3.axisBottom(l)),a.append("g").attr("class","graph__axis-y").call(d3.axisLeft(s));var r=a.append("g").attr("class","graph__tooltip").style("display","none");r.append("rect").attr("class","graph__tooltip-background").attr("width",160).attr("height",25).attr("fill","white").style("opacity",.7),r.append("text").attr("class","graph__tooltip-text").attr("x",80).attr("dy","1.2em").style("text-anchor","middle")}(this.options[this.selectedIndex].text)})})}
},{}],"WdKE":[function(require,module,exports) {
"use strict";require("./file-input"),require("./diagrams");
},{"./file-input":"5Jc1","./diagrams":"BU8f"}]},{},["WdKE"], null)
//# sourceMappingURL=main.33c51820.js.map